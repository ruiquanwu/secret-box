<div class="row album-page-header text-left">
  <h1> <%= @album.name %>
    <%= link_to "Upload Photos", new_album_photo_path, class: 'btn btn-success' %>
    <%= link_to "Save", album_photos_path+"?page="+"#{@photos.current_page}", class: 'btn btn-success', id: 'ajax_test'%>
    <p> current page: <%= @photos.current_page %> </p>
  </h1>
</div>

<div class="row right-panel" data-freephotos ondrop="drop(event)" ondragover="allowDrop(event)">
  <button type="button" class="btn btn-info photo-box-btn">Photo-Box</button>
  <div class="photo-box-content">
    <% @available_photos.each do |photo| %>

      <%= image_tag(photo.picture.url, class: "img-responsive drag-photo", id: "photo_drop"+photo.id.to_s, draggable: "true", ondragstart: "drag(event)", data: {type: "Freephotos", replace_photo_id: photo.id})%>

    <% end %>
  </div>
  <p>You can drag and drop photo to Photo-Box</p>
</div>

<%= will_paginate @photos %>

<% if @photos.current_page%2 == 1 %>
  <div class="row jumbotron photo-page-right">
<% else %>
  <div class="row jumbotron photo-page-left">
<% end %>
<% @photos.each do |photo| %>

  <% if @photos.current_page%2 == 1 %>

    <% if @album.orientation == "landscape" %>
      <%= render partial: 'landscape_page_right', locals: { album: @album, photo: photo} %>
    <% else %>
      <%= render partial: 'portrait_page_right', locals: { album: @album, photo: photo} %>
    <% end %>
  <% else %>
    <% if @album.orientation == "landscape" %>
      <%= render partial: 'landscape_page_left', locals: { album: @album, photo: photo} %>
    <% else %>
      <%= render partial: 'portrait_page_left', locals: { album: @album, photo: photo} %>
    <% end %>

  <% end %>
  
<% end %>

</div>

<div class="photo-box">
  <button type="button" class="btn btn-info photo-box-btn">Photo-Box</button>
</div>
